import{w as b}from"./with-props-CIDimU0D.js";import{t as j,a as n,o as e}from"./chunk-DQRVZFIR-CDtcAPRC.js";import{H as N}from"./Header-D-1lqB9W.js";import{a as h}from"./ConfirmDialog-CgZmBqnd.js";import"./iconBase-BIXBbqyS.js";import"./index-VWaDGczM.js";const L=b(function(){const p=j(),i=new URLSearchParams(p.search).get("id"),[g,f]=n.useState([]),[a,l]=n.useState(null),[x,u]=n.useState([]),[d,C]=n.useState(0),[m]=n.useState(7);return n.useEffect(()=>{(async()=>{try{const r=await h.get(`/category?page=${d}&size=${m}`);if(r.data.data&&r.data.data.content){const s=r.data.data.content;if(f(s),i){const o=s.find(c=>String(c.id)===i);l(o||s[0])}else l(s[0])}}catch(r){console.error("Lỗi khi fetch category:",r)}})()},[d,m,i]),n.useEffect(()=>{(async()=>{var r;if(a)try{const s=await h.get(`product/select/${a.id}?page=${d}&size=${m}`);u(((r=s.data.data)==null?void 0:r.content)||[])}catch(s){console.error("Lỗi khi fetch sản phẩm theo category:",s)}})()},[a]),e.jsxs("div",{className:"bg-white min-h-screen",children:[e.jsx(N,{}),e.jsx("section",{className:"py-16 px-8 bg-[#f8f5f2]",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl text-[#8B5E3C] font-bold uppercase",children:(a==null?void 0:a.nameCate)||"Danh mục sản phẩm"}),e.jsx("div",{className:"w-20 h-1 bg-[#8B5E3C] mx-auto mt-4"}),e.jsx("p",{className:"italic text-gray-500 mt-2",children:"Khám phá hương vị độc đáo"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:g.map(t=>e.jsx("button",{onClick:()=>l(t),className:`px-5 py-2 rounded-full cursor-pointer border-2 transition-all font-semibold
                                    ${(a==null?void 0:a.id)===t.id?"bg-[#8B5E3C] text-white border-[#8B5E3C]":"bg-white text-[#8B5E3C] border-[#8B5E3C] hover:bg-[#8B5E3C] hover:text-white"}
                                `,children:t.nameCate},t.id))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-5xl mx-auto",children:[x.map((t,r)=>{var s,o,c;return e.jsx("a",{href:`/product?id=${t.id}`,className:"flex flex-col md:flex-row items-start md:items-center justify-between border-b border-dotted pb-4 hover:bg-[#f1ebe6] transition gap-2",children:e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow flex justify-between items-center border-l-4 border-[#8B5E3C] w-full",children:e.jsxs("div",{className:"flex-grow flex items-center gap-4",children:[e.jsx("img",{src:t.imageUrl||"/default.png",alt:t.namePro,className:"w-20 h-20 rounded-full object-cover border-2 border-[#8B5E3C] flex-shrink-0"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg mb-1",children:t.namePro}),e.jsx("p",{className:"text-gray-500 text-sm line-clamp-2",children:t.description})]}),e.jsxs("div",{className:"text-right min-w-[100px]",children:[e.jsxs("span",{className:"block font-bold text-[#8B5E3C] text-lg",children:[t.price.toLocaleString("vi-VN"),"đ"]}),e.jsxs("div",{className:"text-sm mt-2",children:[((s=t.status)==null?void 0:s.toUpperCase())==="AVAILABLE"&&e.jsx("span",{className:"inline-block px-2 py-1 text-green-600 bg-green-100 rounded-full font-semibold",children:"Còn hàng"}),((o=t.status)==null?void 0:o.toUpperCase())==="OUT_OF_STOCK"&&e.jsx("span",{className:"inline-block px-2 py-1 text-red-600 bg-red-100 rounded-full font-semibold",children:"Hết hàng"}),((c=t.status)==null?void 0:c.toUpperCase())==="DISCONTINUED"&&e.jsx("span",{className:"inline-block px-2 py-1 text-gray-500 bg-gray-100 rounded-full font-semibold",children:"Ngừng bán"})]})]})]})})},r)}),a&&x.length===0&&e.jsx("div",{className:"col-span-2 text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Hiện không có sản phẩm nào trong danh mục này."})})]})]})})]})});export{L as default};
