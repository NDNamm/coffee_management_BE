import{w as c}from"./with-props-CIDimU0D.js";import{a as l,s as u,o as e}from"./chunk-DQRVZFIR-CDtcAPRC.js";import{H as g}from"./Header-D-1lqB9W.js";import{a as h}from"./ConfirmDialog-CgZmBqnd.js";import"./iconBase-BIXBbqyS.js";import"./index-VWaDGczM.js";const v=c(function(){const[n,i]=l.useState(""),[o,m]=l.useState(""),r=u(),d=async a=>{a.preventDefault();try{const t=await h.post("auth/login",{email:n,password:o});console.log("Login successful:",t.data.data),localStorage.setItem("accessToken",t.data.data.token),localStorage.setItem("phoneNumber",t.data.data.phoneNumber),localStorage.setItem("fullname",t.data.data.fullName),localStorage.setItem("userId",t.data.data.userId.toString()),localStorage.setItem("userRole",t.data.data.nameRole),window.dispatchEvent(new CustomEvent("userLogin",{detail:t.data.name}));const s=t.data.data.nameRole;console.log("Roles from token:",s),s=="ADMIN"||s=="ROLE_ADMIN"?r("/admin/dashboard"):r("/")}catch(t){console.error("Login failed:",t),alert("Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin.")}};return e.jsxs("div",{className:"bg-white min-h-screen",children:[e.jsx(g,{}),e.jsx("section",{className:"py-16 px-8 bg-[#f8f5f2]",children:e.jsxs("div",{className:"container mx-auto max-w-md",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl text-[#8B5E3C] font-bold uppercase",children:"Đăng nhập"}),e.jsx("div",{className:"w-20 h-1 bg-[#8B5E3C] mx-auto mt-4"}),e.jsx("p",{className:"italic text-gray-500 mt-2",children:"Vui lòng nhập thông tin đăng nhập"})]}),e.jsxs("form",{onSubmit:d,className:"bg-white p-8 rounded-lg shadow-lg border-l-4 border-[#8B5E3C]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",htmlFor:"username",children:"Email"}),e.jsx("input",{type:"text",id:"username",value:n,onChange:a=>i(a.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B5E3C]",required:!0})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",htmlFor:"password",children:"Mật khẩu"}),e.jsx("input",{type:"password",id:"password",value:o,onChange:a=>m(a.target.value),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#8B5E3C]",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-[#8B5E3C] text-white py-3 rounded-lg hover:bg-[#6d4b2f] transition-colors font-medium",children:"Đăng nhập"}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Chưa có tài khoản?"," ",e.jsx("a",{href:"/register",className:"text-[#8B5E3C] hover:underline font-medium",children:"Đăng ký ngay"})]})})]})]})})]})});export{v as default};
