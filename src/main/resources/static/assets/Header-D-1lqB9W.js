import{a,s as k,o as e}from"./chunk-DQRVZFIR-CDtcAPRC.js";import{G as o}from"./iconBase-BIXBbqyS.js";import{C as F,a as m}from"./ConfirmDialog-CgZmBqnd.js";import{j as L}from"./index-VWaDGczM.js";function q(r){return o({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(r)}function O(r){return o({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(r)}function Q(r){return o({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(r)}function D(r){return o({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function M(r){return o({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(r)}const H=()=>{if(typeof window>"u")return null;const r=localStorage.getItem("accessToken");if(!r)return null;try{const n=L(r);return n.sub||n.id||n.userId||n.roles||n.fullName||n.phoneNumber||null}catch(n){return console.error("Invalid token",n),null}};function R(){const[r,n]=a.useState([]),[x,g]=a.useState(null),[p,v]=a.useState(null),[j,c]=a.useState(0),[i,C]=a.useState(""),f=k(),y=s=>{s.preventDefault(),i.trim()&&f(`/product/search?name=${encodeURIComponent(i.trim())}`)},[N,l]=a.useState(!1),[w,B]=a.useState(""),[d,E]=a.useState(null),S=()=>{localStorage.removeItem("fullname"),localStorage.removeItem("accessToken"),l(!1),f("/login")};return a.useEffect(()=>{const s=H();v(s);const t=localStorage.getItem("fullname");g(t)},[]),a.useEffect(()=>{const s=t=>{g(t.detail)};return window.addEventListener("userLogin",s),()=>window.removeEventListener("userLogin",s)},[]),a.useEffect(()=>{(async()=>{try{const t=await m.get("/category?page=0&size=7");t.data&&t.data.data&&t.data.data.content&&n(t.data.data.content)}catch(t){console.error("Error fetching categories:",t)}})()},[]),a.useEffect(()=>{(async()=>{try{if(p){const b=((await m.get("/cart")).data.data.cartItems||[]).reduce((h,u)=>h+u.quantity,0);c(b)}else{const t=localStorage.getItem("sessionId");if(t){const h=((await m.get("/cart/session",{params:{sessionId:t}})).data.data.cartItems||[]).reduce((u,z)=>u+z.quantity,0);c(h)}else c(0)}}catch(t){console.error("Lỗi khi lấy giỏ hàng:",t),c(0)}})()},[p]),e.jsxs("header",{className:"bg-black text-white shadow-lg font-sans",children:[e.jsxs("div",{className:"flex justify-between px-12 py-2 text-sm bg-[#2f2210] text-gray-200",children:[e.jsx("span",{children:"☕ Chào mừng đến Coffee House - Nơi hương vị cà phê đích thực"}),e.jsx("div",{children:x?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-[#D6C6B8]",children:["Xin chào, ",x]}),e.jsx("button",{onClick:()=>{B("Bạn có chắc chắn muốn đăng xuất không?"),E(()=>S),l(!0)},className:"text-[#D6C6B8] hover:text-white transition",children:"Đăng xuất"})]}):e.jsx("a",{href:"/login",className:"hover:text-white transition text-[#8B5E3C] font-medium",children:"Đăng nhập / Đăng ký"})})]}),e.jsxs("nav",{className:"px-12 py-4 flex items-center justify-between relative bg-black border-b border-[#2f2210]",children:[e.jsxs("ul",{className:"flex gap-8 items-center text-sm font-medium",children:[e.jsx("li",{children:e.jsx("a",{href:"/",className:"hover:text-[#8B5E3C] transition-colors duration-300 py-2 px-1 border-b-2 border-transparent hover:border-[#8B5E3C]",children:"Trang chủ"})}),e.jsx("li",{children:e.jsx("a",{href:"/gt",className:"hover:text-[#8B5E3C] transition-colors duration-300 py-2 px-1 border-b-2 border-transparent hover:border-[#8B5E3C]",children:"Giới thiệu"})}),e.jsxs("li",{className:"relative group",children:[e.jsxs("span",{className:"flex items-center gap-1 cursor-pointer py-2 px-1 border-b-2 border-transparent group-hover:border-[#8B5E3C]",children:["Sản phẩm ",e.jsx("span",{className:"text-xs",children:"▼"})]}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-48 bg-white text-black rounded-md shadow-xl opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 border border-[#8B5E3C]",children:r.length>0?r.map(s=>e.jsx("a",{href:`/category?id=${s.id}`,className:"block px-4 py-2 hover:bg-[#8B5E3C] hover:text-white transition-colors first:rounded-t-md last:rounded-b-md",children:s.nameCate},s.id)):e.jsx("p",{className:"px-4 py-2 text-gray-600",children:"Loading..."})})]})]}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:e.jsx("a",{href:"/",children:e.jsx("img",{src:"/logo.png",alt:"Coffee House Logo",className:"w-20 h-20 rounded-full object-contain hover:opacity-90 transition"})})}),e.jsxs("ul",{className:"flex gap-8 items-center text-sm font-medium",children:[e.jsx("li",{children:e.jsx("a",{href:"/services",className:"hover:text-[#8B5E3C] transition-colors duration-300 py-2 px-1 border-b-2 border-transparent hover:border-[#8B5E3C]",children:"Dịch vụ"})}),e.jsx("li",{children:e.jsx("a",{href:"/news",className:"hover:text-[#8B5E3C] transition-colors duration-300 py-2 px-1 border-b-2 border-transparent hover:border-[#8B5E3C]",children:"Tin tức"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",className:"hover:text-[#8B5E3C] transition-colors duration-300 py-2 px-1 border-b-2 border-transparent hover:border-[#8B5E3C]",children:"Liên hệ"})}),e.jsx("li",{children:e.jsx("div",{className:"relative group",children:e.jsxs("form",{onSubmit:y,className:"flex items-center gap-0",children:[e.jsx("input",{type:"text",value:i,onChange:s=>C(s.target.value),className:"absolute right-8 opacity-0 group-hover:opacity-100 group-hover:relative group-hover:right-0 transition-all duration-300 ease-in-out border border-[#2f2210] bg-black text-white px-3 py-2 text-sm rounded-l focus:outline-none focus:ring-1 focus:ring-[#8B5E3C] w-48",placeholder:"Tìm kiếm sản phẩm..."}),e.jsx("button",{type:"submit",className:"bg-[#8B5E3C] text-white px-3 py-2 rounded hover:bg-[#704326] transition-colors",children:e.jsx(D,{size:14})})]})})}),e.jsx("li",{className:"relative",children:e.jsxs("a",{href:"/cart",className:"flex items-center gap-1 hover:text-[#8B5E3C] transition-colors",children:[e.jsx(M,{size:18}),e.jsx("span",{className:"absolute -top-2 -right-2 text-xs bg-[#8B5E3C] text-white rounded-full w-5 h-5 flex items-center justify-center",children:j})]})})]})]}),e.jsx(F,{open:N,message:w,onConfirm:()=>d==null?void 0:d(),onCancel:()=>l(!1)})]})}export{q as F,R as H,O as a,Q as b,H as g};
